<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Online Teacher Assessment System</title>

  <!-- Custom fonts for this template-->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link
    href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
    rel="stylesheet">

  <!-- Custom styles for this template-->
  <!-- <link href="css/sb-admin-2.min.css" rel="stylesheet"> -->
  <!-- Bootstrap core CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">



  <style>
     body {
            margin: 0;
            padding: 0;
            font-family: "Arial", sans-serif;
            background-color: #f0fbff;
        }
    
        header {
            background-color: #173154;
            color: #fff;
            padding: 10px;
        }
    
        nav {
            display: flex;
            justify-content: center;
            gap: 20px;
        }
    
        nav ul {
            margin: 0;
            padding: 0;
            list-style: none;
            display: flex;
        }
    
        nav li {
            padding: 10px 20px;
        }
    
        nav li a {
            color: #fff;
            text-decoration: none;
        }
    
        nav li a:hover {
            background-color: #0056b3;
            border-radius: 5px;
        }

    .container {
      margin-top: 80px;
    }

    .card {
      border: none;
      border-radius: 20px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
    }

    .card-body {
      padding: 40px;
    }

    .h4 {
      font-size: 24px;
      font-weight: bold;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .btn-user {
      border-radius: 30px;
      padding: 15px 30px;
      font-weight: bold;
      background-color: #4e73df;
      border-color: #4e73df;
    }

    .btn-user:hover {
      background-color: #2e59d9;
      border-color: #2e59d9;
    }

    .small {
      font-size: 14px;
    }

    .text-center a {
      color: #6c757d;
      text-decoration: none;
    }

    .text-center a:hover {
      color: #000;
    }

    .row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }

    .login-image {
      max-width: 100%;
      border-radius: 50%;
      height: auto;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
    }

    .form-side {
      flex: 1;
      padding: 40px;
    }

    /* Update form sections to be visible initially */
    #section1 {
      display: block;
    }

    #section2 {
      display: none;
    }

    /* Align submit button to center */
    .text-center .btn-user {
      display: block;
      margin: 0 auto;
    }
  </style>



</head>

<body class="">
  <header> 
    <nav>         
        <ul>     
            <li><a href="home.html">Home</a></li>
            <li><a href="home.html">About Us</a></li>
            <li><a href="home.html">Services</a></li>
            <li><a href="login.html">Login</a></li>
            <li><a href="home.html">Contact</a></li>
        </ul>
    </nav>
</header>
  <div class="container">
    <div class="card o-hidden border-0 shadow-lg my-5">
      <div class="card-body p-0">
        <!-- Nested Row within Card Body -->
        <div class="row">
          <!-- Image column -->
          <div class="col-md-5 d-flex align-items-center justify-content-center">
            <img class="login-image" src="img/photo2.webp" alt="Your Image">
          </div>
          <!-- Form column -->
          <div class="col-md-7 form-side">
            <div class="p-5">
              <div class="text-center">
                <h1 class="h4 text-gray-900 mb-4">Create an Account!</h1>
              </div>
              <hr>
              <form class="user" id="myForm">
                <div id="section1">
                  <div class="form-group row">
                    <div class="col-sm-6 mb-3 mb-sm-0">
                      <input type="text" class="form-control form-control-user" id="username" placeholder="Student Id">
                    </div>
                    <div class="col-sm-6">
                      <input type="password" class="form-control form-control-user" id="password"
                        placeholder="Password">
                    </div>
                  </div>
                  <div class="form-group">
                    <input type="email" class="form-control form-control-user" id="exampleInputEmail"
                      placeholder="Email Address">
                  </div>

                  <div class="form-group row">
                    <div class="col-sm-6 mb-3 mb-sm-0">
                      <select class="form-control form-control-user" id="Status" placeholder="Select Faculty">
                        <option value="" selected>Select Faculty</option>

                      </select>
                    </div>
                    <div class="col-sm-6">
                      <select class="form-control form-control-user" id="gender">
                        <option value="" selected>Select gender</option>
                        <option value="male">Male</option>
                      </select>
                    </div>
                  </div>

                  <div class="form-group row">
                    <div class="col-sm-6">
                      <select class="form-control form-control-user" id="province">
                        <option value="" selected>Choose Department</option>
                        <!-- Add your options here -->
                      </select>
                    </div>

                      <div class="col-sm-6">
                    <select id="role" name="role">
                      <option value="teacher">Teacher</option>
                      <option value="student">Student</option>
                      <option value="administrator">Administrator</option>
                    </select>
                    </div>
                    </div>
                  </div>
                  <div class="form-group row">
                    <div class="form-group">
                      <input type="date" class="form-control form-control-user" id="registration_date" placeholder="registration_date">
                    </div>                  
                  </div> 
                  <a href="#" id="next1" class="btn btn-primary btn-user btn-block">Creat</a>
                  <hr>
                </div>
               
               
              </form>
              <hr>
              <div class="text-center">
                <a class="small" href="forgot-password.html">Forgot Password?</a>
              </div>
              <div class="text-center">
                <a class="small" href="login.html">Already have an account? Login!</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
  <a href="AssessmentInstitution_dashboard.html" class="btn btn-secondary py-3 fs-4 back-to-top">Back<i
      class="bi bi-arrow-up"></i></a>


  <!-- Bootstrap core JavaScript-->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="js/sb-admin-2.min.js"></script>

  <script>
    // Get references to the form sections
    const section1 = document.getElementById('section1');
    const section2 = document.getElementById('section2');

    // Get references to the next buttons
    const next1Button = document.getElementById('next1');

    // Add click event listener to the next buttons
    next1Button.addEventListener('click', function (e) {
      e.preventDefault();
      section1.style.display = 'none';
      section2.style.display = 'block';
    });

    // Add submit event listener to the form
    const form = document.querySelector('.user');
    form.addEventListener('submit', function (e) {
      e.preventDefault();

    });
    console.log('hello: albert')
  </script>

  <script>

    async function fetchUserData() {
      var username = document.getElementById('username').value;
      var password = document.getElementById('password').value
      var Email = document.getElementById('exampleInputEmail').value
      var MaritalStatus = document.getElementById('Status');
      var gender = document.getElementById('gender');
      var Province = document.getElementById('province');
      var District = document.getElementById('District');
      var Sector = document.getElementById('Sector');
      var Cell = document.getElementById('Cell');
      var Village = document.getElementById('Village');
      var Education = document.getElementById('Education');
      var role = document.getElementById('role').value;

      const selectedGender = gender.value;
      const selectedMaritalStatus = MaritalStatus.value;
      const selectedProvince = Province.value;
      const selectedDistrict = District.value;
      const selectedSector = Sector.value;
      const selectedCell = Cell.value;
      const selectedVillage = Village.value;
      const selectedEducation = Education.value;

      // National_ID_Type
      const response = await fetch('http://127.0.0.1:8000/Educationdata/');
      const data = await response.json();

      for (let i = 0; i < data.length; i++) {
        // console.log(data[i])
        const option = document.createElement('option');
        option.value = data[i].Education_Description;
        option.textContent = data[i].Education_Description;
        Education.appendChild(option); // Append to the select element
        // console.log(data[i].ID_Type)
      }
      // National_ID_Type
      var patient_gender = await fetch('http://127.0.0.1:8000/Patient_Genderdata/');
      var patientGendaData = await patient_gender.json();
      for (var i = 0; i < patientGendaData.length; i++) {
        console.log('patientGendaData: ' + patientGendaData[i].GenderDescription)
        var option = document.createElement('option');
        option.value = patientGendaData[i].GenderDescription;
        option.textContent = patientGendaData[i].GenderDescription;
        gender.appendChild(option)

      }

      // Marital_Statusdata
      var Marital_Status = await fetch('http://127.0.0.1:8000/Marital_Statusdata/');
      var Marital_Statusdata = await Marital_Status.json();
      for (var i = 0; i < Marital_Statusdata.length; i++) {
        console.log('Marital_Statusdata' + Marital_Statusdata[i].Marital_Status_Description)
        var option = document.createElement('option');
        option.value = Marital_Statusdata[i].Marital_Status_Description;
        option.textContent = Marital_Statusdata[i].Marital_Status_Description;
        MaritalStatus.appendChild(option)
      }


      // Province
      var Provinceda = await fetch('http://127.0.0.1:8000/Provincedata/');
      var Provincedata = await Provinceda.json();

      for (var i = 0; i < Provincedata.length; i++) {
        var option = document.createElement('option');
        option.value = Provincedata[i].Province_List_Description;
        option.textContent = Provincedata[i].Province_List_Description;
        Province.appendChild(option);
      }

      // District
      var Districtdata = await fetch('http://127.0.0.1:8000/Districtdata/');
      var districtresult = await Districtdata.json();

      Province.addEventListener('change', function () {
        var selectedProvince = Province.value;
        // patientData.selectedProvince = selectedProvince;
        District.innerHTML = ''; // Clear previous options

        for (var i = 0; i < districtresult.length; i++) {
          if (districtresult[i].Province_List_Description === selectedProvince) {
            var option = document.createElement('option');
            option.value = districtresult[i].District_List_Description;
            option.textContent = districtresult[i].District_List_Description;
            District.appendChild(option);
          }
        }
      });


      // sector
      var sectordata = await fetch('http://127.0.0.1:8000/Sectordata/');
      var sectorresult = await sectordata.json();

      District.addEventListener('change', function () {
        var selectedDistrict = District.value;
        // patientData.selectedDistrict = selectedDistrict;
        Sector.innerHTML = ''; // Clear previous options

        for (var i = 0; i < sectorresult.length; i++) {
          if (sectorresult[i].District_List_Description === selectedDistrict) {
            var option = document.createElement('option');
            option.value = sectorresult[i].Sector_List_Description;
            option.textContent = sectorresult[i].Sector_List_Description;
            Sector.appendChild(option);
          }
        }
      });

      // cell
      var celldata = await fetch('http://127.0.0.1:8000/Celldata/');
      var cellresult = await celldata.json();

      Sector.addEventListener('change', function () {
        var selectedSector = Sector.value;

        Cell.innerHTML = ''; // Clear previous options

        for (var i = 0; i < cellresult.length; i++) {

          if (cellresult[i].Sector_List_Description === selectedSector) {
            console.log('cellresult ' + cellresult[i].Cell_List_Description)
            var option = document.createElement('option');
            option.value = cellresult[i].Cell_List_Description;
            option.textContent = cellresult[i].Cell_List_Description;
            Cell.appendChild(option);
          }
        }
      });

      // village
      var villagedata = await fetch('http://127.0.0.1:8000/Villagedata/');
      var villageresult = await villagedata.json();

      Cell.addEventListener('change', function () {
        var selectedCell = Cell.value;

        Village.innerHTML = ''; // Clear previous options

        for (var i = 0; i < villageresult.length; i++) {
          if (villageresult[i].Cell_List_Description === selectedCell) {
            var option = document.createElement('option');
            option.value = villageresult[i].Vilage_List_Description;
            option.textContent = villageresult[i].Vilage_List_Description;
            Village.appendChild(option);
          }
        }


      });

      gender.value = selectedGender;
      MaritalStatus.value = selectedMaritalStatus;
      Province.value = selectedProvince;
      District.value = selectedDistrict;
      Sector.value = selectedSector;
      Cell.value = selectedCell;
      Village.value = selectedVillage;
      Education.value = selectedEducation;

    }


    async function showdata(event) {
      event.preventDefault(); // prevent the form from submitting normally
      var username = document.getElementById('username').value;
      var password = document.getElementById('password').value
      var Email = document.getElementById('exampleInputEmail').value
      var MaritalStatus = document.getElementById('Status');
      var gender = document.getElementById('gender');
      var Role = document.getElementById('role').value;
      var Province = document.getElementById('province');
      var District = document.getElementById('District');
      var Sector = document.getElementById('Sector');
      var Cell = document.getElementById('Cell');
      var Village = document.getElementById('Village');
      var School = document.getElementById('Education');

      console.log('username: ' + username)
      console.log('password ' + password)
      console.log('Email: ' + Email)

      try {
        const response = await fetch("http://127.0.0.1:8000/users/", {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(
            {

              username: username,
              password: password,
              email: Email,
              Status: MaritalStatus.value,
              gender: gender.value,
              province: Province.value,
              district: District.value,
              sector: Sector.value,
              cell: Cell.value,
              village: Village.value,
              role: 'Head Master',
              user: 1

            }
          )
        });

        if (response.ok) {
          window.location.href = "login.html";

        } else {

          throw new Error(`HTTP error! status: ${response.status}`);
        }


      } catch (e) {
        console.log(`An error occurred: ${e}`);
      }


    }


    document.addEventListener('DOMContentLoaded', async () => {
      await fetchUserData();
      var form = document.getElementById('myForm');
      form.addEventListener('submit', showdata);
    });

    document.addEventListener('DOMContentLoaded', fetchUserData);

  </script>


</body>

</html>